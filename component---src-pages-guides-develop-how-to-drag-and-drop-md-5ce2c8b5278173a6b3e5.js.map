{"version":3,"file":"component---src-pages-guides-develop-how-to-drag-and-drop-md-5ce2c8b5278173a6b3e5.js","mappings":"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","sources":["webpack://dev-site-documentation-template/./src/pages/guides/develop/how_to/drag_and_drop.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/github/workspace/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"use-drag-and-drop\"\n    }}>{`Use Drag-and-Drop`}</h1>\n    <h2 {...{\n      \"id\": \"with-local-images\"\n    }}>{`With local images`}</h2>\n    <p>{`You must invoke the `}<a parentName=\"p\" {...{\n        \"href\": \"/express-add-ons-docs/references/addonsdk/addonsdk-app.md#enabledragtodocument\"\n      }}><inlineCode parentName=\"a\">{`addOnUISdk.app.enableDragToDocument()`}</inlineCode></a>{` method for each draggable image to implement this feature. It accepts two parameters: the `}<inlineCode parentName=\"p\">{`HTMLElement`}</inlineCode>{` and an object with a `}<inlineCode parentName=\"p\">{`previewCallback()`}</inlineCode>{` that returns the image URL for preview purposes, and a `}<inlineCode parentName=\"p\">{`completionCallback()`}</inlineCode>{` that fetches the corresponding blob to finalize insertion into the document.`}</p>\n    <p>{`You also need to listen for `}<inlineCode parentName=\"p\">{`\"dragstart\"`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`\"dragend\"`}</inlineCode>{` events to manage logs or other custom behaviour when the user interacts with the images.`}</p>\n    <h3 {...{\n      \"id\": \"example\"\n    }}>{`Example`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`import addOnUISdk from \"https://new.express.adobe.com/static/add-on-sdk/sdk.js\";\n\n// Wait for the SDK to be ready before rendering elements in the DOM.\naddOnUISdk.ready.then(async () => {\n  // Create the image element in the DOM.\n  const image = document.createElement(\"img\");\n  image.id = \"image.jpg\";\n  // The image is local to the add-on.\n  image.src = \"./images/image.jpg\";\n  image.addEventListener(\"click\", addToDocument);\n\n  // Enable drag to document for the image.\n  addOnUISdk.app.enableDragToDocument(image, {\n    previewCallback: (element) => {\n      // return the new URL for preview purposes\n      return new URL(element.src);\n    },\n    completionCallback: async (element) => {\n      // return the blob for the image\n      return [{ blob: await getBlob(element.src) }];\n    },\n  });\n\n  // Add the image to the document.\n  document.body.appendChild(image);\n});\n\n// Utility functions\n\n//Add image to the document.\nasync function addToDocument(event) {\n  const url = event.currentTarget.src;\n  const blob = await getBlob(url);\n  addOnUISdk.app.document.addImage(blob);\n}\n\n// Handle \"dragstart\" event\nfunction startDrag(eventData) {\n  console.log(\"The drag event has started for\", eventData.element.id);\n}\n\n// Handle \"dragend\" event\nfunction endDrag(eventData) {\n  if (!eventData.dropCancelled) {\n    console.log(\"The drag event has ended for\", eventData.element.id);\n  } else {\n    console.log(\"The drag event was cancelled for\", eventData.element.id);\n  }\n}\n\n// Get the binary object for the image.\nasync function getBlob(url) {\n  return await fetch(url).then((response) => response.blob());\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"with-remote-images-or-audio\"\n    }}>{`With remote images or audio`}</h2>\n    <p>{`To implement drag and drop with remotely hosted images, you similarly invoke `}<inlineCode parentName=\"p\">{`addOnUISdk.app.enableDragToDocument()`}</inlineCode>{`, but you fetch the resource from its remote URL. Provide a `}<inlineCode parentName=\"p\">{`previewCallback()`}</inlineCode>{` that returns the preview URL and a `}<inlineCode parentName=\"p\">{`completionCallback()`}</inlineCode>{` that retrieves the image as a blob. You can then attach the same `}<inlineCode parentName=\"p\">{`\"dragstart\"`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`\"dragend\"`}</inlineCode>{` event handlers to log or customize interactions as needed.`}</p>\n    <InlineAlert slots=\"text\" variant=\"warning\" mdxType=\"InlineAlert\" />\n    <p>{`To drag audio content, you must specify an additional `}<inlineCode parentName=\"p\">{`attributes`}</inlineCode>{` object with a `}<inlineCode parentName=\"p\">{`title`}</inlineCode>{` property. A note on how to include it is found in the following example.`}</p>\n    <h3 {...{\n      \"id\": \"example-1\"\n    }}>{`Example`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ts\"\n      }}>{`import addOnUISdk from \"https://new.express.adobe.com/static/add-on-sdk/sdk.js\";\n\n// Enable drag support for an element\nfunction makeDraggableUsingUrl(elementId: string, previewUrl: string) {\n  const image = document.getElementById(elementId);\n\n  const dragCallbacks = {\n    previewCallback: (image: HTMLElement) => {\n      // Return a new URL for the remote preview\n      return new URL(previewUrl);\n    },\n    completionCallback: async (image: HTMLElement) => {\n      // Fetch and return the image blob\n      const imageBlob = await fetch(image.src).then((response) =>\n        response.blob()\n      );\n      return [{ blob: imageBlob }];\n\n      // ⚠️ for audio content, an attributes object\n      // with the title is mandatory. For example:\n      // return [{ blob: audioBlob, attributes: { title: \"Jazzy beats\" } }];\n    },\n  };\n\n  try {\n    addOnUISdk.app.enableDragToDocument(image, dragCallbacks);\n  } catch (error) {\n    console.log(\"Failed to enable DragToDocument:\", error);\n  }\n}\n\n// Log start of the drag event\naddOnUISdk.app.on(\"dragstart\", (eventData: DragStartEventData) => {\n  console.log(\"The drag event has started for\", eventData.element);\n});\n\n// Log end of the drag event\naddOnUISdk.app.on(\"dragend\", (eventData: DragEndEventData) => {\n  if (!eventData.dropCancelled) {\n    console.log(\"The drag event has ended for\", eventData.element);\n    disableDragToDocument();\n  } else {\n    console.log(\"The drag event was cancelled for\", eventData.element);\n    console.log(\"Cancel Reason:\", eventData.dropCancelReason);\n  }\n});\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"notes\"\n    }}>{`Notes`}</h2>\n    <p>{`If the content being dragged is an animated GIF, it will be added as an animated GIF to the document, as long as it fits `}<a parentName=\"p\" {...{\n        \"href\": \"https://helpx.adobe.com/express/create-and-edit-videos/change-file-formats/import-gif-limits.html\"\n      }}>{`the size criteria for animated GIF's`}</a>{`. In the event that it doesn't fit the size criteria, an error toast will be shown to the user.`}</p>\n    <p>{`Since the Add-on SDK uses pointer event handlers to perform drag operations, you should ensure that you don't attach any pointer event handlers that prevent default or stop propagation. Adding those types of handlers will kill the built-in handlers and cause the events not to work.`}</p>\n    <p>{`You should not attach `}<inlineCode parentName=\"p\">{`click`}</inlineCode>{` event listeners to drag-enabled elements in the capture phase, as the Add-on SDK attaches a `}<inlineCode parentName=\"p\">{`cancelClickEvent`}</inlineCode>{` handler to drag-enabled elements to ensure that the automatic click (pointer down + pointer up automatically fires a click event) doesn't fire. Adding other handlers to this same element will trigger them on drag & drop completion.`}</p>\n    <InlineAlert slots=\"text\" variant=\"info\" mdxType=\"InlineAlert\" />\n    <p>{`Use Chrome devTools to check the handlers attached to the element and its ancestors to identify any that may be causing conflicts with drag and drop handlers.`}</p>\n    <p>{`There are several `}<a parentName=\"p\" {...{\n        \"href\": \"/express-add-ons-docs/samples.md\"\n      }}>{`code samples`}</a>{` that implement drag and drop, including the `}<a parentName=\"p\" {...{\n        \"href\": \"/express-add-ons-docs/samples.md#import-images-using-oauth\"\n      }}>{`import-images-using-oauth`}</a>{` and `}<a parentName=\"p\" {...{\n        \"href\": \"/express-add-ons-docs/samples.md#pix\"\n      }}>{`pix`}</a>{` projects that you can reference.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineAlert","name","props","console","warn","mdx","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","_objectWithoutProperties","_excluded","_extends","mdxType","parentName","slots","variant","isMDXComponent"],"sourceRoot":""}
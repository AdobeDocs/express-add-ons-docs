"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[7014],{73862:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return m},default:function(){return u}});var a,i=n(87462),o=n(63366),s=(n(15007),n(64983)),r=n(91515),d=["components"],m={},p=(a="InlineAlert",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,s.mdx)("div",e)}),c={_frontmatter:m},l=r.Z;function u(e){var t=e.components,n=(0,o.Z)(e,d);return(0,s.mdx)(l,(0,i.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,s.mdx)("h1",{id:"script-runtime"},"Script Runtime"),(0,s.mdx)("p",null,"The script runtime is a sandboxed JavaScript execution environment, which allows to execute add-on's JavaScript code securely and synchronously in another JavaScript environment e.g., browser."),(0,s.mdx)(p,{slots:"text",variant:"warning",mdxType:"InlineAlert"}),(0,s.mdx)("p",null,"The script runtime is not currently available to developers. The documentation on this page for informational purposes only."),(0,s.mdx)(p,{slots:"text",variant:"warning",mdxType:"InlineAlert"}),(0,s.mdx)("p",null,"The script runtime references are currently ",(0,s.mdx)("strong",{parentName:"p"},"experimental only"),", so you will need to set ",(0,s.mdx)("inlineCode",{parentName:"p"},"experimentalApis")," flag to ",(0,s.mdx)("inlineCode",{parentName:"p"},"true")," in the ",(0,s.mdx)("a",{parentName:"p",href:"../manifest/index.md#requirements"},(0,s.mdx)("inlineCode",{parentName:"a"},"requirements"))," section of the ",(0,s.mdx)("inlineCode",{parentName:"p"},"manifest.json")," to use them. ",(0,s.mdx)("em",{parentName:"p"},"Please do not use these APIs in any add-ons you plan to distribute or submit with updates until they have been deemed stable.")),(0,s.mdx)("h2",{id:"overview"},"Overview"),(0,s.mdx)("p",null,"The script runtime exposes three categories of APIs, which each have their own specific references and are outlined below."),(0,s.mdx)("h3",{id:"communication-apis"},"Communication APIs"),(0,s.mdx)("p",null,"The ",(0,s.mdx)("a",{parentName:"p",href:"./communication/"},"communication APIs")," allow you to communicate between the script runtime and the iframe runtime where your add-on is running via exposed APIs.  "),(0,s.mdx)("h3",{id:"web-apis"},"Web APIs"),(0,s.mdx)("p",null,"The script runtime does NOT provide a full fledged browserâ€™s JavaScript execution environment. Most of the browsers APIs/Global Objects are not available in Script Runtime. For these, the developers can use iframe runtime environment and ",(0,s.mdx)("a",{parentName:"p",href:"./communication/#expose-apis-from-the-ui"},"communicate")," the result back to the script running inside script runtime environment. Some of the commonly used ",(0,s.mdx)("a",{parentName:"p",href:"./web/"},"Web APIs")," (with limited scope) have been provided inside script runtime environment."),(0,s.mdx)("h3",{id:"editor-apis"},"Editor APIs"),(0,s.mdx)("p",null,"The ",(0,s.mdx)("a",{parentName:"p",href:"./editor/"},"editor APIs")," provide access to the user's document structure and properties, and allow you to make changes to it via the provided APIs."),(0,s.mdx)("h2",{id:"script-runtime-javascript-engine"},"Script Runtime JavaScript Engine"),(0,s.mdx)("p",null,"The script runtime is a sandboxed JavaScript execution environment, which allows to execute add-on's JavaScript code securely and synchronously in another JavaScript environment e.g., browser.\nSome key concepts to note about the script runtime include:"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"Limited access to browser APIs (see the ",(0,s.mdx)("a",{parentName:"li",href:"./web/"},"Web APIs")," reference). Note however, you can use the ",(0,s.mdx)("a",{parentName:"li",href:"./communication/"},"communication APIs")," to expose browser APIs (ie: ",(0,s.mdx)("inlineCode",{parentName:"li"},"fetch"),") from the iframe environment to be used in the script runtime."),(0,s.mdx)("li",{parentName:"ul"},"Runs in a slower execution environment."),(0,s.mdx)("li",{parentName:"ul"},"Provides no debugging capabilities other than those provided by the ",(0,s.mdx)("a",{parentName:"li",href:"../web/index.md#injected-objects"},"injected ",(0,s.mdx)("inlineCode",{parentName:"a"},"console")," functions"),"."),(0,s.mdx)("li",{parentName:"ul"},"Runs in the same context/thread as the host's application business logic, thus providing access to interact with it via the injected APIs.")),(0,s.mdx)("h2",{id:"getting-started-with-the-apis"},"Getting Started with the APIs"),(0,s.mdx)("p",null,"The methods defined in the ",(0,s.mdx)("a",{parentName:"p",href:"./communication/"},"communication API reference")," are used to expose and use the API proxies between the iframe and script environments of your add-on. Start with the ",(0,s.mdx)("a",{parentName:"p",href:"./communication/"},"communication reference")," to learn more about how to expose APIs and use them from either  environment."),(0,s.mdx)("h3",{id:"script-entry-point"},"Script entry point"),(0,s.mdx)("p",null,"To use the script runtime in your add-on, start by defining a new ",(0,s.mdx)("inlineCode",{parentName:"p"},"script")," entry point in your ",(0,s.mdx)("inlineCode",{parentName:"p"},"manifest.json")," file with the value set to the name of the file containing the JavaScript code you're using with the script runtime functions: "),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'    "entryPoints": [\n        {\n            "type": "panel",\n            "id": "panel1",\n            "main": "index.html",\n            "script": "code.js" \n        }\n    ]\n')),(0,s.mdx)("p",null,"The JavaScript code in the file referenced can then access any of the injected global objects and module APIs defined in all of the APIs outlined in this set of references (",(0,s.mdx)("a",{parentName:"p",href:"./communication/"},"communication APIs"),", ",(0,s.mdx)("a",{parentName:"p",href:"./web/"},"Web APIs")," and ",(0,s.mdx)("a",{parentName:"p",href:"./editor/"},"editor APIs"),"."),(0,s.mdx)("h2",{id:"code-samples"},"Code Samples"),(0,s.mdx)("p",null,"The following ",(0,s.mdx)("a",{parentName:"p",href:"https://github.com/AdobeDocs/express-add-on-samples/tree/main/script-runtime-samples"},"code samples")," have been provided to help you get started using these new script runtime APIs."),(0,s.mdx)("h3",{id:"communication-iframe-script-runtime-sample"},(0,s.mdx)("a",{parentName:"h3",href:"https://github.com/AdobeDocs/express-add-on-samples/tree/main/script-runtime-samples/communication-iframe-script-runtime"},"communication-iframe-script-runtime sample")),(0,s.mdx)("p",null,"Demonstrates the use of the communication APIs to expose and proxy APIs bidirectionally between the iframe and script runtime environments. Also includes demonstrating how to use some of the ",(0,s.mdx)("a",{parentName:"p",href:"./web/"},"Web APIs")," such as ",(0,s.mdx)("inlineCode",{parentName:"p"},"setTimeout()")," and ",(0,s.mdx)("inlineCode",{parentName:"p"},"console.log()"),"."),(0,s.mdx)("h3",{id:"editor-apis-sample"},(0,s.mdx)("a",{parentName:"h3",href:"https://github.com/AdobeDocs/express-add-on-samples/tree/main/script-runtime-samples/editor-apis"},"editor-apis sample")),(0,s.mdx)("p",null,"Demonstrates how to use the ",(0,s.mdx)("a",{parentName:"p",href:"./editor/"},"editor APIs")," to create various shapes and add them to the document. "),(0,s.mdx)("h3",{id:"image-and-page-sample"},(0,s.mdx)("a",{parentName:"h3",href:"https://github.com/AdobeDocs/express-add-on-samples/tree/main/script-runtime-samples/image-and-page"},"image-and-page sample")),(0,s.mdx)("p",null,"A more comprehensive example of using the ",(0,s.mdx)("a",{parentName:"p",href:"./editor/"},"editor APIs")," to add a page, images and shapes, as well as clear the artboard."),(0,s.mdx)("h2",{id:"debugging-script-based-add-ons"},"Debugging script based add-ons"),(0,s.mdx)("p",null,"Debugging with breakpoints from the script runtime (via ",(0,s.mdx)("inlineCode",{parentName:"p"},"code.js"),") is currently not supported and for the time-being, only console logging (via ",(0,s.mdx)("inlineCode",{parentName:"p"},"console.log()"),") can be used. However, support for debugging by applying breakpoints in the code will be available in the near future. Please refer to ",(0,s.mdx)("a",{parentName:"p",href:"./editor/#example-code-snippet"},"Example Code Snippet"),", where a ",(0,s.mdx)("inlineCode",{parentName:"p"},"rectangle")," object is printed to console for debugging purpose."),(0,s.mdx)("h2",{id:"cli-template-for-script-based-add-on"},"CLI template for script based add-on"),(0,s.mdx)("p",null,"The add-on CLI contains built-in, pre-configured templates to allow you to create an add-on project based on your favorite development stack in the quickest possible manner. There are currently five different template options available. To get started with script based add-on using javascript with editor APIs, you must choose the template named ",(0,s.mdx)("inlineCode",{parentName:"p"},"javascript-with-editor-apis"),". Please refer to ",(0,s.mdx)("a",{parentName:"p",href:"../../guides/getting_started/dev_tooling/#using-the-cli"},"Using the CLI")," section to get more information on how to use the CLI and create new add-on."),(0,s.mdx)("br",null),(0,s.mdx)("p",null,"The sample script based add-on created using template named ",(0,s.mdx)("inlineCode",{parentName:"p"},"javascript-with-editor-apis")," will look as shown from ",(0,s.mdx)("a",{parentName:"p",href:"../../guides/getting_started/dev_tooling#add-on-development-tools-panel"},"Add-on Development Tools Panel"),":"),(0,s.mdx)("p",null,(0,s.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,s.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"57.50000000000001%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,s.mdx)("picture",{parentName:"span"},"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/express-add-ons-docs/static/d6c408f7032187d7e696b54150a04f09/5530d/script-add-on-sample.webp 320w","/express-add-ons-docs/static/d6c408f7032187d7e696b54150a04f09/0c8fb/script-add-on-sample.webp 640w","/express-add-ons-docs/static/d6c408f7032187d7e696b54150a04f09/94b1e/script-add-on-sample.webp 1280w","/express-add-ons-docs/static/d6c408f7032187d7e696b54150a04f09/7a57d/script-add-on-sample.webp 1737w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/express-add-ons-docs/static/d6c408f7032187d7e696b54150a04f09/dd4a7/script-add-on-sample.png 320w","/express-add-ons-docs/static/d6c408f7032187d7e696b54150a04f09/0f09e/script-add-on-sample.png 640w","/express-add-ons-docs/static/d6c408f7032187d7e696b54150a04f09/bbbf7/script-add-on-sample.png 1280w","/express-add-ons-docs/static/d6c408f7032187d7e696b54150a04f09/39ea4/script-add-on-sample.png 1737w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,s.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/express-add-ons-docs/static/d6c408f7032187d7e696b54150a04f09/bbbf7/script-add-on-sample.png",alt:"script add-on sample screenshot",title:"script add-on sample screenshot",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-references-scriptruntime-index-md-23d6dc65449bc8629a86.js.map